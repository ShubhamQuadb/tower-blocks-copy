<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Space Battle - Player Ship Blue Icon Generator</title>
  <style>
    body { margin: 0; font-family: Arial, Helvetica, sans-serif; background: #070311; color: #eaf6ff; padding: 18px; }
    h1 { text-align: center; color: #00ccff; text-shadow: 0 0 14px #00ccff; margin: 6px 0 16px; }
    .wrap { max-width: 1100px; margin: 0 auto; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
    .card { background: rgba(0,0,0,0.5); border: 1px solid #0a2a46; border-radius: 10px; padding: 14px; text-align: center; }
    .card h3 { margin: 6px 0 8px; color: #7fe3ff; font-size: 14px; }
    canvas { display: block; margin: 8px auto; background: #000; border: 2px solid #00ccff; border-radius: 10px; }
    button { background: linear-gradient(45deg, #00ccff, #0088ff); color: #fff; border: 0; padding: 8px 14px; border-radius: 8px; cursor: pointer; margin: 0 6px; font-weight: 700; }
    .danger { background: linear-gradient(45deg, #ff6b6b, #ff3b3b); }
    .row { text-align: center; margin: 14px 0; }
    .note { text-align: center; opacity: 0.85; margin-bottom: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ðŸš€ Space Battle - Ship Blue Icon Generator</h1>
    <p class="note">Source: <code>images/character/player/playerShipBlue.png</code> â€¢ Generates exact ship-on-space icons for Feature Phone and Smartphone.</p>

    <div class="row">
      <button class="danger" onclick="generateAll(true)">ðŸ“¥ Generate & Download All</button>
    </div>

    <div class="grid">
      <div class="card">
        <h3>Feature Phone Icon 102Ã—102</h3>
        <canvas id="icon102" width="102" height="102"></canvas>
        <button onclick="generate102()">Generate</button>
        <button onclick="downloadCanvas('icon102', 'space_battle_icon_102x102.png')">Download</button>
      </div>

      <div class="card">
        <h3>Smartphone Icon 512Ã—512</h3>
        <canvas id="icon512" width="512" height="512"></canvas>
        <button onclick="generate512()">Generate</button>
        <button onclick="downloadCanvas('icon512', 'space_battle_icon_512x512.png')">Download</button>
      </div>

      <div class="card">
        <h3>Feature Graphic 1080Ã—612 (optional)</h3>
        <canvas id="icon1080x612" width="1080" height="612"></canvas>
        <button onclick="generate1080x612()">Generate</button>
        <button onclick="downloadCanvas('icon1080x612', 'space_battle_feature_1080x612.png')">Download</button>
      </div>

      <div class="card">
        <h3>Portrait Icon 480Ã—640 (optional)</h3>
        <canvas id="icon480x640" width="480" height="640"></canvas>
        <button onclick="generate480x640()">Generate</button>
        <button onclick="downloadCanvas('icon480x640', 'space_battle_icon_480x640.png')">Download</button>
      </div>
    </div>
  </div>

  <script>
    const shipSrc = './images/character/player/playerShipBlue.png';
    const shipImg = new Image();
    let shipReady = false;
    shipImg.addEventListener('load', function(){ shipReady = true; });
    // Ensure absolute path in case relative fails
    try {
      shipImg.src = shipSrc;
    } catch (e) {
      shipImg.src = 'C:/Users/Shubham Verma/Desktop/Games/space-battle/images/character/player/playerShipBlue.png';
    }

    function spaceBg(ctx, w, h){
      const g = ctx.createLinearGradient(0,0,0,h);
      g.addColorStop(0, '#0a0015');
      g.addColorStop(0.25, '#1a0530');
      g.addColorStop(0.5, '#0d1b3e');
      g.addColorStop(0.75, '#0a0820');
      g.addColorStop(1, '#000000');
      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);
      // stars
      ctx.fillStyle = 'rgba(255,255,255,0.9)';
      for(let i=0;i<Math.max(40, Math.floor((w*h)/12000));i++){
        const x = Math.random()*w, y = Math.random()*h, r = Math.random()*1.8+0.2;
        ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
      }
      // vignette
      const vg = ctx.createRadialGradient(w/2,h/2, Math.min(w,h)*0.2, w/2,h/2, Math.max(w,h)*0.7);
      vg.addColorStop(0, 'rgba(0,0,0,0)');
      vg.addColorStop(1, 'rgba(0,0,0,0.45)');
      ctx.fillStyle = vg; ctx.fillRect(0,0,w,h);
    }

    function drawShipCentered(ctx, w, h, scale=0.65){
      if (!shipReady || !shipImg.width || !shipImg.height) {
        // Show placeholder hint
        ctx.fillStyle = '#00ccff';
        ctx.font = 'bold 12px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Loading ship...', w/2, h/2);
        return;
      }
      const target = Math.min(w,h)*scale;
      const aspect = shipImg.width / shipImg.height || 1;
      let dw = target, dh = target/aspect;
      if(dh>target){ dh=target; dw=target*aspect; }
      const x = (w-dw)/2, y = (h-dh)/2;
      // subtle glow under ship
      ctx.save();
      ctx.shadowColor = '#00ccff';
      ctx.shadowBlur = Math.max(6, target*0.08);
      ctx.drawImage(shipImg, x, y, dw, dh);
      ctx.restore();
    }

    function addTitle(ctx, w, h, textSize){
      ctx.font = `bold ${textSize}px Arial`;
      ctx.fillStyle = '#00ccff';
      ctx.textAlign = 'center';
      ctx.shadowColor = '#00ccff';
      ctx.shadowBlur = 8;
      ctx.fillText('SPACE BATTLE', w/2, h - textSize*0.6);
      ctx.shadowBlur = 0;
    }

    function whenReady(fn){ if (shipReady) { fn(); } else { shipImg.addEventListener('load', fn, { once: true }); } }
    function generate102(){ const c = document.getElementById('icon102'); const ctx = c.getContext('2d'); spaceBg(ctx,102,102); whenReady(()=>drawShipCentered(ctx,102,102,0.9)); }
    function generate512(){ const c = document.getElementById('icon512'); const ctx = c.getContext('2d'); spaceBg(ctx,512,512); whenReady(()=>{ drawShipCentered(ctx,512,512,0.8); addTitle(ctx,512,512,34); }); }
    function generate1080x612(){ const c = document.getElementById('icon1080x612'); const ctx = c.getContext('2d'); spaceBg(ctx,1080,612); whenReady(()=>{ drawShipCentered(ctx,1080,612,0.5); addTitle(ctx,1080,612,48); }); }
    function generate480x640(){ const c = document.getElementById('icon480x640'); const ctx = c.getContext('2d'); spaceBg(ctx,480,640); whenReady(()=>{ drawShipCentered(ctx,480,640,0.65); addTitle(ctx,480,640,32); }); }

    function downloadCanvas(id, name){
      const c = document.getElementById(id);
      if (!c) return;
      // Prefer toBlob + object URL for reliability on some browsers
      if (c.toBlob) {
        c.toBlob(function(blob){
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.style.display = 'none';
          a.href = url;
          a.download = name;
          document.body.appendChild(a);
          a.click();
          setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 100);
        }, 'image/png');
        return;
      }
      // Fallback to data URL
      const a = document.createElement('a');
      a.download = name;
      a.href = c.toDataURL('image/png').replace('image/png','image/octet-stream');
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    function generateAll(autoDownload=false){
      generate102(); generate512(); generate1080x612(); generate480x640();
      if(autoDownload){ setTimeout(()=>{
        downloadCanvas('icon102','space_battle_icon_102x102.png');
        setTimeout(()=>downloadCanvas('icon512','space_battle_icon_512x512.png'), 300);
        setTimeout(()=>downloadCanvas('icon1080x612','space_battle_feature_1080x612.png'), 600);
        setTimeout(()=>downloadCanvas('icon480x640','space_battle_icon_480x640.png'), 900);
      }, 400); }
    }

    window.addEventListener('load', ()=>{ generateAll(false); });
  </script>
</body>
</html>
